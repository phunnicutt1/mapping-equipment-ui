---
description:
globs:
alwaysApply: false
---
# Human-in-the-Loop Workflow Patterns

## Workflow Philosophy
The application implements sophisticated Human-in-the-Loop capabilities where AI provides intelligent suggestions but humans make final decisions on equipment mapping.

## Core Workflow Components

### Equipment Status States
Equipment instances progress through these states:
- **Suggested** (initial AI detection with confidence score)
- **Confirmed** (human validated)
- **Needs Review** (flagged for attention)
- **User Created** (manually created equipment)

### Point Status States
Individual BACnet points have status tracking:
- **Suggested** (AI assigned to equipment)
- **Confirmed** (human validated assignment)
- **Flagged** (marked for review)

## Human Decision Points

### Equipment Level Decisions
Located in [components/MainPanel.tsx](mdc:components/MainPanel.tsx):
- **Confirm All Points** - Bulk confirmation of equipment and its points
- **Flag Equipment** - Mark equipment for review
- **Save as Template** - Create reusable template from confirmed equipment
- **Manual Equipment Creation** - Create custom equipment instances

### Point Level Decisions
Available in equipment point lists:
- **Individual Point Confirmation** - Validate single point assignments
- **Point Flagging** - Mark problematic points
- **Point Reassignment** - Move points between equipment via drag-and-drop

### Template System (Knowledge Capture)
Templates capture human knowledge for reuse:
- **Template Creation** - Save confirmed equipment patterns
- **Auto-Application** - Apply templates to similar equipment (70% match threshold)
- **Template Library** - Reusable equipment configurations

## Confidence-Based Presentation
The system presents AI suggestions with confidence indicators:
- **High Confidence (95%+)** - Green styling, minimal intervention needed
- **Medium Confidence (60-94%)** - Yellow styling, review recommended  
- **Low Confidence (<60%)** - Red styling, human review required

## Validation Workflows

### Progressive Validation
1. **Bulk Actions** - "Confirm All Points" for high-confidence equipment
2. **Selective Review** - Individual point validation for complex cases
3. **Template Application** - Automated application of proven patterns
4. **Manual Override** - Complete human control when needed

### Feedback Loops
- **Console Messages** - Real-time feedback on user actions
- **Visual Indicators** - Color-coded status throughout interface
- **Progress Tracking** - Completion percentages and statistics
- **Celebration System** - Positive reinforcement on completion

## Decision Support Features
- **Search and Filter** - Find specific equipment or points quickly
- **Point Properties Tags** - Visual indicators of BACnet point characteristics
- **Equipment Insights** - Vendor, model, and device location information
- **Undo/Redo Capability** - Safe experimentation with decisions
